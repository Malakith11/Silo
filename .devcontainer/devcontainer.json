{
  "name": "Silo_dev",
  "build": { "dockerfile": "Dockerfile" },
  "remoteUser": "node",
  "workspaceFolder": "/workspaces/silo",
  "runArgs": [
    "--name=Silo_Dev_Container",
    "--hostname=silo-dev",
    "--label=devcontainer.name=Silo_Dev_Container",
    "--label=project=silo",
    "--add-host=host.docker.internal:host-gateway"
  ],
  "mounts": [
    "source=/var/run/docker.sock,target=/var/run/docker.sock,type=bind"
  ],
    "containerEnv": {
    "LANG": "C.UTF-8",
    "LC_ALL": "C.UTF-8"
  },

  "postStartCommand": "bash -lc 'gid=$(stat -c %g /var/run/docker.sock); sudo groupadd -for -g $gid docker && sudo usermod -aG docker node'"
  ,
  
  "customizations": {
    "vscode": {
      "settings": {
        "terminal.integrated.defaultProfile.linux": "bash",
        "editor.formatOnSave": true
      },
      "extensions": [
        "ms-playwright.playwright",
        "esbenp.prettier-vscode",
        "dbaeumer.vscode-eslint"
      ]
    }
  },
  
  "postCreateCommand": "bash -lc ' \
    (command -v corepack >/dev/null 2>&1 && corepack enable || true); \
    if ! command -v pnpm >/dev/null 2>&1; then npm i -g pnpm; fi; \
    pnpm install --frozen-lockfile || true; \
    npx playwright install chrome; \
    python3 -m pip show litellm || true; \
    supabase --version || true \
'",
  "portsAttributes": {
    "3000": { "label": "Web" },
    "4100": { "label": "LiteLLM Proxy" }
},
"forwardPorts": [3000, 4100, 5432, 8000, 3001, 3002]
}
